
/*
 * This file was generated by the Gradle 'init' task.
 */
subprojects {
    group = 'com.niton.jainparse'
    version = '3.0.0b3'
    apply plugin: 'java'
    apply plugin: 'java-library'
    apply plugin: 'maven-publish'

    java {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
        withJavadocJar()
        withSourcesJar()
        modularity.inferModulePath.set(true)
    }
    println("Build: ${project.group}:${project.name}")
    def jUnitVersion = '5.8.+'
    def mockitoVersion = '5.10.+'
    def assertjVersion = '3.22.+'
    dependencies {
        compileOnly "org.jetbrains:annotations:20.+"
        testCompileOnly "org.jetbrains:annotations:20.+"
        compileOnly 'org.projectlombok:lombok:1.18.+'
        annotationProcessor 'org.projectlombok:lombok:1.18.+'
        testAnnotationProcessor 'org.projectlombok:lombok:1.18.+'
        testCompileOnly 'org.projectlombok:lombok:1.18.+'

        testCompileOnly platform("org.junit:junit-bom:$jUnitVersion")
        testRuntimeOnly platform("org.junit:junit-bom:$jUnitVersion")
        testImplementation platform("org.junit:junit-bom:$jUnitVersion")
        testImplementation platform("org.mockito:mockito-bom:$mockitoVersion")

        testImplementation "org.assertj:assertj-core:$assertjVersion"
        testImplementation "org.mockito:mockito-core"
        testImplementation "org.mockito:mockito-junit-jupiter"
        testImplementation 'org.junit.jupiter:junit-jupiter-params'
        testCompileOnly 'org.junit.jupiter:junit-jupiter-api'

        testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'

    }
    repositories {
        mavenCentral()
    }
    test {
        useJUnitPlatform()
    }
    javadoc {
        failOnError = false
    }
    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
    publishing {
        publications {
            maven(MavenPublication) {
                from(components.java)
                groupId = group
                artifactId = project.name
                version = project.version
            }
        }
        repositories {
            maven {
                name = "Artifactory"
                url = "https://niton.jfrog.io/artifactory/java-libs"
                credentials {
                    username = "nbrugger@student.tgm.ac.at"
                    def pwdFile = new File("${projectDir}/TOKENS")
                    if (pwdFile.exists())
                        password = pwdFile.readLines().get(0)
                    else
                        password = System.getenv("ARTIFACTORY_API_KEY")
                }
            }
        }
    }
}


